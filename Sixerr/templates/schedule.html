<h1>Booked Sessions</h1>

{% if bookings %}
    <ul>
        {% for booking in bookings %}
            <li>
                <p><strong>Date: </strong><span class="booking-date">{{ booking.date }}</span></p>
                <p><strong>Skill:</strong> {{ booking.mentor.skill }}</p>
                <p><strong>Mentor:</strong> {{ booking.mentor.first_name }} {{ booking.mentor.last_name }}</p>
                <p><strong>Client:</strong> {{ booking.client.first_name }} {{ booking.client.last_name }}</p>
                <p><strong>Time:</strong> {{ booking.start_time }} to {{ booking.end_time }}</p>
                <p><strong>Modality:</strong> {{ booking.modality }}</p>
                <p><strong>Price:</strong> ${{ booking.price }}</p>
                <p><strong>Current Date:</strong> {{ current_date }}</p>

                {% if current_date > booking.date %}
                    {% if not booking.review_set.exists %}
                        <a href="{% url 'leave_review' booking_id=booking.booking_id %}">
                            <button>Leave a Review</button>
                        </a>
                    {% else %}
                        <form method="post" action="{% url 'delete_booking' booking_id=booking.booking_id %}">
                            {% csrf_token %}
                            <button type="submit">Delete Booking</button>
                        </form>
                    {% endif %}

                {% elif current_date == booking.date and current_hour > booking.int_end_time %}

                    {% if not booking.review_set.exists %}
                        <a href="{% url 'leave_review' booking_id=booking.booking_id %}">
                            <button>Leave a Review</button>
                        </a>
                    {% else %}
                        <form method="post" action="{% url 'delete_booking' booking_id=booking.booking_id %}">
                            {% csrf_token %}
                            <button type="submit">Delete Booking</button>
                        </form>
                    {% endif %}
                {% endif %}
            </li>
            <hr>
        {% endfor %}
    </ul>
{% else %}
    <p>No booked sessions.</p>
{% endif %}
